import{r as u,u as p,a as b,j as r}from"./index-a8c27e68.js";import{M as f}from"./MarsEmoji-a5ce85b0.js";const j=()=>{const[s,d]=u.useState(!0),[e,l]=u.useState({email:"",password:"",username:"",name:""}),[i,a]=u.useState(""),c=p(),m=b(t=>t.setUser),g=async t=>{if(t.preventDefault(),a(""),!e.email||!e.password)return a("Email and password are required");if(s)try{const o=localStorage.getItem(`user_email_${e.email}`);if(!o)return a("Invalid email or password");const n=JSON.parse(localStorage.getItem(`user_${o}`)||"null");if(!n)return a("Invalid email or password");m({...n,onboardingCompleted:!!n.onboardingCompleted}),c("/feed")}catch(o){console.error("Login error:",o),a("Failed to log in. Please try again.")}else{if(!e.username)return a("Username is required");if(e.username.length<3)return a("Username must be at least 3 characters");if(e.password.length<6)return a("Password must be at least 6 characters");if(localStorage.getItem(`user_${e.username}`))return a("Username already taken");const n={id:`user_${Date.now()}`,email:e.email,username:e.username,name:e.name||e.username,onboardingCompleted:!1,createdAt:new Date().toISOString()};try{localStorage.setItem(`user_${e.username}`,JSON.stringify(n)),localStorage.setItem(`user_email_${e.email}`,e.username),m(n),c("/onboarding")}catch(x){console.error("Registration error:",x),a("Failed to create account. Please try again.")}}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white flex items-center justify-center px-4",children:r.jsxs("div",{className:"max-w-md w-full",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx("img",{src:"/netuark.png",alt:"Netuark Logo",className:"h-16 w-auto"})}),r.jsxs("h1",{className:"text-4xl font-bold text-gray-900 flex items-center justify-center gap-2",children:["NeTuArk",r.jsx(f,{})]}),r.jsx("p",{className:"text-gray-600 mt-2",children:"The World Is Opening"})]}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:s?"Welcome Back":"Create Account"}),r.jsxs("form",{onSubmit:g,className:"space-y-4",children:[!s&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"text",placeholder:"Full Name",required:!s,value:e.name,onChange:t=>l({...e,name:t.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:border-blue-500"}),r.jsx("input",{type:"text",placeholder:"Username (unique)",required:!s,value:e.username,onChange:t=>l({...e,username:t.target.value.toLowerCase().replace(/[^a-z0-9]/g,"")}),className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:border-blue-500"})]}),r.jsx("input",{type:"email",placeholder:"Email",required:!0,value:e.email,onChange:t=>l({...e,email:t.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:border-blue-500"}),r.jsx("input",{type:"password",placeholder:"Password",required:!0,value:e.password,onChange:t=>l({...e,password:t.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:border-blue-500"}),i&&r.jsx("p",{className:"text-red-500 text-sm",children:i}),r.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white font-semibold py-4 rounded-full hover:bg-blue-700 transition",children:s?"Log In":"Sign Up"})]}),r.jsxs("p",{className:"text-center mt-6 text-gray-600",children:[s?"Don't have an account? ":"Already have an account? ",r.jsx("button",{onClick:()=>{d(!s),a("")},className:"text-blue-600 font-semibold",children:s?"Sign Up":"Log In"})]})]})]})})};export{j as default};
